{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport axios from \"axios\";\nimport Layout from \"../../components/Layout\";\nimport { connect } from \"react-redux\";\nimport ValidateTable from \"../../components/ValidateKYBComp\";\n\nvar Wizard = /*#__PURE__*/function (_React$Component) {\n  _inherits(Wizard, _React$Component);\n\n  var _super = _createSuper(Wizard);\n\n  function Wizard(props) {\n    var _this;\n\n    _classCallCheck(this, Wizard);\n\n    _this = _super.call(this, props);\n    _this.addUserToRegistry = _this.addUserToRegistry.bind(_assertThisInitialized(_this));\n    _this.proceedToKeycloak = _this.proceedToKeycloak.bind(_assertThisInitialized(_this));\n    _this.state = {\n      addedToRegistry: false\n    };\n    return _this;\n  }\n\n  _createClass(Wizard, [{\n    key: \"addUserToRegistry\",\n    value: function addUserToRegistry() {\n      var _this2 = this;\n\n      var sessionId = this.props.sessionId;\n      var reqObj = {\n        sessionId: sessionId\n      };\n      axios.post(\"/registry/add\", reqObj).then(function (response) {\n        // console.log(response);\n        _this2.setState({\n          addedToRegistry: true\n        });\n      }).then(function () {\n        axios.post(\"/email/send\", {\n          sessionId: sessionId,\n          link: \"thisisalink\"\n        }).then(function (response) {\n          // console.log(response);\n          console.log(\"email sent ok\");\n        });\n      }); //TODO add here the send email callback\n    }\n  }, {\n    key: \"proceedToKeycloak\",\n    value: function proceedToKeycloak() {\n      console.log(\"proceed to keycloak\");\n      window.location.href = this.props.keycloakUrl;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var addToRegistryDiv = !this.state.addedToRegistry ? __jsx(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: \"3 rem\"\n        }\n      }, __jsx(\"button\", {\n        onClick: this.addUserToRegistry\n      }, \"Register\")) : __jsx(\"div\", {\n        style: {\n          margin: \"3 rem 3 rem 3 rem 3 rem\"\n        }\n      }, \"Thank you for registering\");\n      return __jsx(\"div\", {\n        className: \"container\",\n        style: {\n          marginTop: \"3rem\"\n        }\n      }, __jsx(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: \"3rem\"\n        }\n      }, \"Please review the attributes retrieved, presented below. If you are certain that these attributes correctly identify you please click the Next button. Additionally, if you would like you can  add your Company\\u2019s KYB profile in the public registry in an easily Verifiable Format? If you opt in for this feature the public profile of your organization will be easily verified by anyone (public authorities, B2B transactions etc.) greatly facilitating your dealings with these parties. If Yes, please click the \\u201CRegister\\u201D button\"), __jsx(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: \"3rem\"\n        }\n      }, \"Details:\"), __jsx(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: \"3rem\"\n        }\n      }, __jsx(ValidateTable, {\n        userDetails: this.props.userDetails\n      })), addToRegistryDiv, __jsx(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: \"3rem\"\n        }\n      }, __jsx(\"button\", {\n        onClick: this.proceedToKeycloak\n      }, \"Finish\")));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var reduxStore, req;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                reduxStore = _ref.reduxStore, req = _ref.req;\n                return _context.abrupt(\"return\", {\n                  userDetails: req.userDetails,\n                  selfLei: req.selfLei,\n                  sessionId: req.sessionId,\n                  keycloakUrl: req.keycloakRedirectURI\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Wizard;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    test: \"Test\"\n  };\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wizard);","map":{"version":3,"sources":["/home/ni/code/js/grids-DC/pages/kyb/registry-prompt.js"],"names":["React","axios","Layout","connect","ValidateTable","Wizard","props","addUserToRegistry","bind","proceedToKeycloak","state","addedToRegistry","sessionId","reqObj","post","then","response","setState","link","console","log","window","location","href","keycloakUrl","addToRegistryDiv","marginBottom","margin","marginTop","userDetails","reduxStore","req","selfLei","keycloakRedirectURI","Component","mapStateToProps","test","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport Layout from \"../../components/Layout\";\nimport { connect } from \"react-redux\";\nimport ValidateTable from \"../../components/ValidateKYBComp\";\n\nclass Wizard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.addUserToRegistry = this.addUserToRegistry.bind(this);\n    this.proceedToKeycloak = this.proceedToKeycloak.bind(this);\n    this.state = {\n      addedToRegistry: false,\n    };\n  }\n\n  static async getInitialProps({ reduxStore, req }) {\n    //returned value here is getting mered with the mapstatetoprops\n    // mapstatetoprops overrides these values if they match\n    return {\n      userDetails: req.userDetails,\n      selfLei: req.selfLei,\n      sessionId: req.sessionId,\n      keycloakUrl: req.keycloakRedirectURI,\n    };\n  }\n\n  addUserToRegistry() {\n    let sessionId = this.props.sessionId;\n    const reqObj = { sessionId: sessionId };\n    axios.post(\"/registry/add\", reqObj).then((response) => {\n      // console.log(response);\n      this.setState({\n        addedToRegistry: true,\n      });\n    }).then( () =>{\n      axios.post(\"/email/send\", {sessionId: sessionId, link:\"thisisalink\"}).then((response) => {\n        // console.log(response);\n        console.log(\"email sent ok\")\n    })});\n    //TODO add here the send email callback\n  }\n\n  proceedToKeycloak() {\n    console.log(\"proceed to keycloak\");\n    window.location.href = this.props.keycloakUrl;\n  }\n\n  render() {\n    let addToRegistryDiv = !this.state.addedToRegistry ? (\n      <div className=\"row\" style={{ marginBottom: \"3 rem\" }}>\n        <button onClick={this.addUserToRegistry}>Register</button>\n      </div>\n    ) : (\n      <div style={{ margin: \"3 rem 3 rem 3 rem 3 rem\" }}>\n        Thank you for registering\n      </div>\n    );\n\n    return (\n      <div className=\"container\" style={{ marginTop: \"3rem\" }}>\n        {/* <ValidateTable userDetails={this.props.userDetails}></ValidateTable> */}\n        <div className=\"row\" style={{ marginBottom: \"3rem\" }}>\n          Please review the attributes retrieved, presented below. If you are\n          certain that these attributes correctly identify you please click the\n          Next button. Additionally, if you would like you can  add your Company’s KYB\n          profile in the public registry in an easily Verifiable Format? If you\n          opt in for this feature the public profile of your organization will\n          be easily verified by anyone (public authorities, B2B transactions\n          etc.) greatly facilitating your dealings with these parties. If Yes,\n          please click the “Register” button\n        </div>\n        <div className=\"row\" style={{ marginBottom: \"3rem\" }}>\n          Details:\n        </div>\n        <div className=\"row\" style={{ marginBottom: \"3rem\" }}>\n          <ValidateTable userDetails={this.props.userDetails}></ValidateTable>\n        </div>\n\n        {addToRegistryDiv}\n\n        <div className=\"row\" style={{ marginBottom: \"3rem\" }}>\n          <button onClick={this.proceedToKeycloak}>Finish</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    test: \"Test\",\n  };\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {};\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Wizard);\n"]},"metadata":{},"sourceType":"module"}